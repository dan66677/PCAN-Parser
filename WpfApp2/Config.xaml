<Window x:Class="WpfApp2.ConfigWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d"
        Title="PCAN-View TRC Parser" 
        WindowState="Maximized"
        WindowStartupLocation="CenterScreen">

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="250"/>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="Auto"/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Заголовок -->
        <TextBlock Grid.ColumnSpan="3" Text="Конфигуратор параметров CAN" 
                   FontSize="16" FontWeight="Bold" HorizontalAlignment="Center" Margin="10"/>

        <!-- Список параметров слева -->
        <Border Grid.Row="1" Grid.Column="0" Margin="5" BorderBrush="Gray" BorderThickness="1">
            <StackPanel>
                <ListBox x:Name="ParameterList" SelectionMode="Single" 
                         SelectionChanged="ParameterList_SelectionChanged"
                         ScrollViewer.VerticalScrollBarVisibility="Auto"
                         HorizontalContentAlignment="Stretch">
                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <Border Padding="2">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Text="{Binding}" VerticalAlignment="Center"/>
                                    <Button Grid.Column="1" Content="×" Width="20" Margin="5,0,0,0" 
                                            Click="DeleteItemButton_Click" Tag="{Binding}"
                                            ToolTip="Удалить параметр"/>
                                </Grid>
                            </Border>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>

                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,5">
                    <Button x:Name="AddParamButton" Content="Добавить" Width="100" 
                            Click="AddParamButton_Click" Margin="0,0,5,0"/>
                    <Button x:Name="DeleteParamButton" Content="Удалить" Width="100" 
                            Click="DeleteParamButton_Click"/>
                </StackPanel>
            </StackPanel>
        </Border>

        <!-- Центральная панель с параметрами -->
        <ScrollViewer Grid.Row="1" Grid.Column="1" Margin="5" VerticalScrollBarVisibility="Auto">
            <Grid Margin="10">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <!-- Основные параметры -->
                <TextBlock Grid.Row="0" Grid.Column="0" Text="Имя параметра:" Margin="0,5"/>
                <TextBox x:Name="NameEntry" Grid.Row="0" Grid.Column="1" Margin="5"/>

                <TextBlock Grid.Row="1" Grid.Column="0" Text="ID параметра:" Margin="0,5"/>
                <TextBox x:Name="IdEntry" Grid.Row="1" Grid.Column="1" Margin="5"/>

                <TextBlock Grid.Row="2" Grid.Column="0" Text="Отступ:" Margin="0,5"/>
                <TextBox x:Name="Indent" Grid.Row="2" Grid.Column="1" Margin="5"/>

                <TextBlock Grid.Row="3" Grid.Column="0" Text="Множитель:" Margin="0,5"/>
                <TextBox x:Name="Multiplier" Grid.Row="3" Grid.Column="1" Margin="5"/>

                <TextBlock Grid.Row="4" Grid.Column="0" Text="Делитель:" Margin="0,5"/>
                <TextBox x:Name="Divider" Grid.Row="4" Grid.Column="1" Margin="5"/>

                <!-- Байты данных -->
                <TextBlock Grid.Row="5" Grid.ColumnSpan="2" Text="Байты данных:" 
                           FontWeight="Bold" Margin="0,10"/>

                <!-- Полная таблица байтов (1-8) с битами (7-0) -->
                <Grid Grid.Row="6" Grid.ColumnSpan="2">
                    <Grid.Resources>
                        <Style TargetType="TextBlock">
                            <Setter Property="HorizontalAlignment" Value="Center"/>
                            <Setter Property="FontWeight" Value="Bold"/>
                            <Setter Property="Margin" Value="2"/>
                        </Style>
                        <Style TargetType="TextBox">
                            <Setter Property="Width" Value="40"/>
                            <Setter Property="Margin" Value="2"/>
                        </Style>
                        <Style TargetType="CheckBox">
                            <Setter Property="Width" Value="20"/>
                            <Setter Property="Margin" Value="2"/>
                            <Setter Property="HorizontalAlignment" Value="Center"/>
                        </Style>
                    </Grid.Resources>

                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <!-- Заголовки битов -->
                        <RowDefinition Height="Auto"/>
                        <!-- Байт 1 -->
                        <RowDefinition Height="Auto"/>
                        <!-- Байт 2 -->
                        <RowDefinition Height="Auto"/>
                        <!-- Байт 3 -->
                        <RowDefinition Height="Auto"/>
                        <!-- Байт 4 -->
                        <RowDefinition Height="Auto"/>
                        <!-- Байт 5 -->
                        <RowDefinition Height="Auto"/>
                        <!-- Байт 6 -->
                        <RowDefinition Height="Auto"/>
                        <!-- Байт 7 -->
                        <RowDefinition Height="Auto"/>
                        <!-- Байт 8 -->
                    </Grid.RowDefinitions>

                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <!-- Названия байтов -->
                        <ColumnDefinition Width="Auto"/>
                        <!-- HEX-значение -->
                        <ColumnDefinition Width="Auto"/>
                        <!-- Бит 7 -->
                        <ColumnDefinition Width="Auto"/>
                        <!-- Бит 6 -->
                        <ColumnDefinition Width="Auto"/>
                        <!-- Бит 5 -->
                        <ColumnDefinition Width="Auto"/>
                        <!-- Бит 4 -->
                        <ColumnDefinition Width="Auto"/>
                        <!-- Бит 3 -->
                        <ColumnDefinition Width="Auto"/>
                        <!-- Бит 2 -->
                        <ColumnDefinition Width="Auto"/>
                        <!-- Бит 1 -->
                        <ColumnDefinition Width="Auto"/>
                        <!-- Бит 0 -->
                    </Grid.ColumnDefinitions>

                    <!-- Заголовки битов -->
                    <TextBlock Grid.Row="0" Grid.Column="2" Text="7"/>
                    <TextBlock Grid.Row="0" Grid.Column="3" Text="6"/>
                    <TextBlock Grid.Row="0" Grid.Column="4" Text="5"/>
                    <TextBlock Grid.Row="0" Grid.Column="5" Text="4"/>
                    <TextBlock Grid.Row="0" Grid.Column="6" Text="3"/>
                    <TextBlock Grid.Row="0" Grid.Column="7" Text="2"/>
                    <TextBlock Grid.Row="0" Grid.Column="8" Text="1"/>
                    <TextBlock Grid.Row="0" Grid.Column="9" Text="0"/>

                    <!-- Байт 1 -->
                    <TextBlock Grid.Row="1" Grid.Column="0" Text="Байт 1:"/>
                    <TextBox x:Name="Byte1Value" Grid.Row="1" Grid.Column="1" Text="00" 
                             TextChanged="ByteValue_TextChanged" Tag="Byte1"/>
                    <CheckBox Grid.Row="1" Grid.Column="2" Tag="Byte1Bit7" Checked="CheckBox_Checked" Unchecked="CheckBox_Unchecked"/>
                    <CheckBox Grid.Row="1" Grid.Column="3" Tag="Byte1Bit6" Checked="CheckBox_Checked" Unchecked="CheckBox_Unchecked"/>
                    <CheckBox Grid.Row="1" Grid.Column="4" Tag="Byte1Bit5" Checked="CheckBox_Checked" Unchecked="CheckBox_Unchecked"/>
                    <CheckBox Grid.Row="1" Grid.Column="5" Tag="Byte1Bit4" Checked="CheckBox_Checked" Unchecked="CheckBox_Unchecked"/>
                    <CheckBox Grid.Row="1" Grid.Column="6" Tag="Byte1Bit3" Checked="CheckBox_Checked" Unchecked="CheckBox_Unchecked"/>
                    <CheckBox Grid.Row="1" Grid.Column="7" Tag="Byte1Bit2" Checked="CheckBox_Checked" Unchecked="CheckBox_Unchecked"/>
                    <CheckBox Grid.Row="1" Grid.Column="8" Tag="Byte1Bit1" Checked="CheckBox_Checked" Unchecked="CheckBox_Unchecked"/>
                    <CheckBox Grid.Row="1" Grid.Column="9" Tag="Byte1Bit0" Checked="CheckBox_Checked" Unchecked="CheckBox_Unchecked"/>

                    <!-- Байт 2 -->
                    <TextBlock Grid.Row="2" Grid.Column="0" Text="Байт 2:"/>
                    <TextBox x:Name="Byte2Value" Grid.Row="2" Grid.Column="1" Text="00" 
                             TextChanged="ByteValue_TextChanged" Tag="Byte2"/>
                    <CheckBox Grid.Row="2" Grid.Column="2" Tag="Byte2Bit7" Checked="CheckBox_Checked" Unchecked="CheckBox_Unchecked"/>
                    <CheckBox Grid.Row="2" Grid.Column="3" Tag="Byte2Bit6" Checked="CheckBox_Checked" Unchecked="CheckBox_Unchecked"/>
                    <CheckBox Grid.Row="2" Grid.Column="4" Tag="Byte2Bit5" Checked="CheckBox_Checked" Unchecked="CheckBox_Unchecked"/>
                    <CheckBox Grid.Row="2" Grid.Column="5" Tag="Byte2Bit4" Checked="CheckBox_Checked" Unchecked="CheckBox_Unchecked"/>
                    <CheckBox Grid.Row="2" Grid.Column="6" Tag="Byte2Bit3" Checked="CheckBox_Checked" Unchecked="CheckBox_Unchecked"/>
                    <CheckBox Grid.Row="2" Grid.Column="7" Tag="Byte2Bit2" Checked="CheckBox_Checked" Unchecked="CheckBox_Unchecked"/>
                    <CheckBox Grid.Row="2" Grid.Column="8" Tag="Byte2Bit1" Checked="CheckBox_Checked" Unchecked="CheckBox_Unchecked"/>
                    <CheckBox Grid.Row="2" Grid.Column="9" Tag="Byte2Bit0" Checked="CheckBox_Checked" Unchecked="CheckBox_Unchecked"/>

                    <!-- Байт 3 -->
                    <TextBlock Grid.Row="3" Grid.Column="0" Text="Байт 3:"/>
                    <TextBox x:Name="Byte3Value" Grid.Row="3" Grid.Column="1" Text="00" 
                             TextChanged="ByteValue_TextChanged" Tag="Byte3"/>
                    <CheckBox Grid.Row="3" Grid.Column="2" Tag="Byte3Bit7" Checked="CheckBox_Checked" Unchecked="CheckBox_Unchecked"/>
                    <CheckBox Grid.Row="3" Grid.Column="3" Tag="Byte3Bit6" Checked="CheckBox_Checked" Unchecked="CheckBox_Unchecked"/>
                    <CheckBox Grid.Row="3" Grid.Column="4" Tag="Byte3Bit5" Checked="CheckBox_Checked" Unchecked="CheckBox_Unchecked"/>
                    <CheckBox Grid.Row="3" Grid.Column="5" Tag="Byte3Bit4" Checked="CheckBox_Checked" Unchecked="CheckBox_Unchecked"/>
                    <CheckBox Grid.Row="3" Grid.Column="6" Tag="Byte3Bit3" Checked="CheckBox_Checked" Unchecked="CheckBox_Unchecked"/>
                    <CheckBox Grid.Row="3" Grid.Column="7" Tag="Byte3Bit2" Checked="CheckBox_Checked" Unchecked="CheckBox_Unchecked"/>
                    <CheckBox Grid.Row="3" Grid.Column="8" Tag="Byte3Bit1" Checked="CheckBox_Checked" Unchecked="CheckBox_Unchecked"/>
                    <CheckBox Grid.Row="3" Grid.Column="9" Tag="Byte3Bit0" Checked="CheckBox_Checked" Unchecked="CheckBox_Unchecked"/>

                    <!-- Байт 4 -->
                    <TextBlock Grid.Row="4" Grid.Column="0" Text="Байт 4:"/>
                    <TextBox x:Name="Byte4Value" Grid.Row="4" Grid.Column="1" Text="00" 
                             TextChanged="ByteValue_TextChanged" Tag="Byte4"/>
                    <CheckBox Grid.Row="4" Grid.Column="2" Tag="Byte4Bit7" Checked="CheckBox_Checked" Unchecked="CheckBox_Unchecked"/>
                    <CheckBox Grid.Row="4" Grid.Column="3" Tag="Byte4Bit6" Checked="CheckBox_Checked" Unchecked="CheckBox_Unchecked"/>
                    <CheckBox Grid.Row="4" Grid.Column="4" Tag="Byte4Bit5" Checked="CheckBox_Checked" Unchecked="CheckBox_Unchecked"/>
                    <CheckBox Grid.Row="4" Grid.Column="5" Tag="Byte4Bit4" Checked="CheckBox_Checked" Unchecked="CheckBox_Unchecked"/>
                    <CheckBox Grid.Row="4" Grid.Column="6" Tag="Byte4Bit3" Checked="CheckBox_Checked" Unchecked="CheckBox_Unchecked"/>
                    <CheckBox Grid.Row="4" Grid.Column="7" Tag="Byte4Bit2" Checked="CheckBox_Checked" Unchecked="CheckBox_Unchecked"/>
                    <CheckBox Grid.Row="4" Grid.Column="8" Tag="Byte4Bit1" Checked="CheckBox_Checked" Unchecked="CheckBox_Unchecked"/>
                    <CheckBox Grid.Row="4" Grid.Column="9" Tag="Byte4Bit0" Checked="CheckBox_Checked" Unchecked="CheckBox_Unchecked"/>

                    <!-- Байт 5 -->
                    <TextBlock Grid.Row="5" Grid.Column="0" Text="Байт 5:"/>
                    <TextBox x:Name="Byte5Value" Grid.Row="5" Grid.Column="1" Text="00" 
                             TextChanged="ByteValue_TextChanged" Tag="Byte5"/>
                    <CheckBox Grid.Row="5" Grid.Column="2" Tag="Byte5Bit7" Checked="CheckBox_Checked" Unchecked="CheckBox_Unchecked"/>
                    <CheckBox Grid.Row="5" Grid.Column="3" Tag="Byte5Bit6" Checked="CheckBox_Checked" Unchecked="CheckBox_Unchecked"/>
                    <CheckBox Grid.Row="5" Grid.Column="4" Tag="Byte5Bit5" Checked="CheckBox_Checked" Unchecked="CheckBox_Unchecked"/>
                    <CheckBox Grid.Row="5" Grid.Column="5" Tag="Byte5Bit4" Checked="CheckBox_Checked" Unchecked="CheckBox_Unchecked"/>
                    <CheckBox Grid.Row="5" Grid.Column="6" Tag="Byte5Bit3" Checked="CheckBox_Checked" Unchecked="CheckBox_Unchecked"/>
                    <CheckBox Grid.Row="5" Grid.Column="7" Tag="Byte5Bit2" Checked="CheckBox_Checked" Unchecked="CheckBox_Unchecked"/>
                    <CheckBox Grid.Row="5" Grid.Column="8" Tag="Byte5Bit1" Checked="CheckBox_Checked" Unchecked="CheckBox_Unchecked"/>
                    <CheckBox Grid.Row="5" Grid.Column="9" Tag="Byte5Bit0" Checked="CheckBox_Checked" Unchecked="CheckBox_Unchecked"/>

                    <!-- Байт 6 -->
                    <TextBlock Grid.Row="6" Grid.Column="0" Text="Байт 6:"/>
                    <TextBox x:Name="Byte6Value" Grid.Row="6" Grid.Column="1" Text="00" 
                             TextChanged="ByteValue_TextChanged" Tag="Byte6"/>
                    <CheckBox Grid.Row="6" Grid.Column="2" Tag="Byte6Bit7" Checked="CheckBox_Checked" Unchecked="CheckBox_Unchecked"/>
                    <CheckBox Grid.Row="6" Grid.Column="3" Tag="Byte6Bit6" Checked="CheckBox_Checked" Unchecked="CheckBox_Unchecked"/>
                    <CheckBox Grid.Row="6" Grid.Column="4" Tag="Byte6Bit5" Checked="CheckBox_Checked" Unchecked="CheckBox_Unchecked"/>
                    <CheckBox Grid.Row="6" Grid.Column="5" Tag="Byte6Bit4" Checked="CheckBox_Checked" Unchecked="CheckBox_Unchecked"/>
                    <CheckBox Grid.Row="6" Grid.Column="6" Tag="Byte6Bit3" Checked="CheckBox_Checked" Unchecked="CheckBox_Unchecked"/>
                    <CheckBox Grid.Row="6" Grid.Column="7" Tag="Byte6Bit2" Checked="CheckBox_Checked" Unchecked="CheckBox_Unchecked"/>
                    <CheckBox Grid.Row="6" Grid.Column="8" Tag="Byte6Bit1" Checked="CheckBox_Checked" Unchecked="CheckBox_Unchecked"/>
                    <CheckBox Grid.Row="6" Grid.Column="9" Tag="Byte6Bit0" Checked="CheckBox_Checked" Unchecked="CheckBox_Unchecked"/>

                    <!-- Байт 7 -->
                    <TextBlock Grid.Row="7" Grid.Column="0" Text="Байт 7:"/>
                    <TextBox x:Name="Byte7Value" Grid.Row="7" Grid.Column="1" Text="00" 
                             TextChanged="ByteValue_TextChanged" Tag="Byte7"/>
                    <CheckBox Grid.Row="7" Grid.Column="2" Tag="Byte7Bit7" Checked="CheckBox_Checked" Unchecked="CheckBox_Unchecked"/>
                    <CheckBox Grid.Row="7" Grid.Column="3" Tag="Byte7Bit6" Checked="CheckBox_Checked" Unchecked="CheckBox_Unchecked"/>
                    <CheckBox Grid.Row="7" Grid.Column="4" Tag="Byte7Bit5" Checked="CheckBox_Checked" Unchecked="CheckBox_Unchecked"/>
                    <CheckBox Grid.Row="7" Grid.Column="5" Tag="Byte7Bit4" Checked="CheckBox_Checked" Unchecked="CheckBox_Unchecked"/>
                    <CheckBox Grid.Row="7" Grid.Column="6" Tag="Byte7Bit3" Checked="CheckBox_Checked" Unchecked="CheckBox_Unchecked"/>
                    <CheckBox Grid.Row="7" Grid.Column="7" Tag="Byte7Bit2" Checked="CheckBox_Checked" Unchecked="CheckBox_Unchecked"/>
                    <CheckBox Grid.Row="7" Grid.Column="8" Tag="Byte7Bit1" Checked="CheckBox_Checked" Unchecked="CheckBox_Unchecked"/>
                    <CheckBox Grid.Row="7" Grid.Column="9" Tag="Byte7Bit0" Checked="CheckBox_Checked" Unchecked="CheckBox_Unchecked"/>

                    <!-- Байт 8 -->
                    <TextBlock Grid.Row="8" Grid.Column="0" Text="Байт 8:"/>
                    <TextBox x:Name="Byte8Value" Grid.Row="8" Grid.Column="1" Text="00" 
                             TextChanged="ByteValue_TextChanged" Tag="Byte8"/>
                    <CheckBox Grid.Row="8" Grid.Column="2" Tag="Byte8Bit7" Checked="CheckBox_Checked" Unchecked="CheckBox_Unchecked"/>
                    <CheckBox Grid.Row="8" Grid.Column="3" Tag="Byte8Bit6" Checked="CheckBox_Checked" Unchecked="CheckBox_Unchecked"/>
                    <CheckBox Grid.Row="8" Grid.Column="4" Tag="Byte8Bit5" Checked="CheckBox_Checked" Unchecked="CheckBox_Unchecked"/>
                    <CheckBox Grid.Row="8" Grid.Column="5" Tag="Byte8Bit4" Checked="CheckBox_Checked" Unchecked="CheckBox_Unchecked"/>
                    <CheckBox Grid.Row="8" Grid.Column="6" Tag="Byte8Bit3" Checked="CheckBox_Checked" Unchecked="CheckBox_Unchecked"/>
                    <CheckBox Grid.Row="8" Grid.Column="7" Tag="Byte8Bit2" Checked="CheckBox_Checked" Unchecked="CheckBox_Unchecked"/>
                    <CheckBox Grid.Row="8" Grid.Column="8" Tag="Byte8Bit1" Checked="CheckBox_Checked" Unchecked="CheckBox_Unchecked"/>
                    <CheckBox Grid.Row="8" Grid.Column="9" Tag="Byte8Bit0" Checked="CheckBox_Checked" Unchecked="CheckBox_Unchecked"/>
                </Grid>
            </Grid>
        </ScrollViewer>

        <!-- Панель управления справа -->
        <StackPanel Grid.Row="1" Grid.Column="2" Margin="5" VerticalAlignment="Top">
            <Button x:Name="SaveButton" Content="Сохранить все" Click="saveButton_Click"
                    Width="120" Margin="0,0,0,5"/>
            <Button x:Name="LoadButton" Content="Загрузить" Click="loadButton_Click"
                    Width="120"/>
        </StackPanel>

        <!-- Статусная строка -->
        <StatusBar Grid.Row="2" Grid.ColumnSpan="3">
            <StatusBarItem>
                <TextBlock x:Name="StatusText">Готово</TextBlock>
            </StatusBarItem>
        </StatusBar>
    </Grid>
</Window>